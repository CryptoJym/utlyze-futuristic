<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Debug Mobile Menu</title>
    <link rel="stylesheet" href="/style.css">
    <style>
        body { padding: 20px; }
        .debug-info {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: #f0f0f0;
            padding: 20px;
            border: 2px solid #333;
            font-family: monospace;
            z-index: 9999;
        }
        .debug-info h3 { margin-top: 0; }
        .debug-log {
            max-height: 200px;
            overflow-y: auto;
            font-size: 12px;
        }
    </style>
</head>
<body>
    <h1>Mobile Menu Debug Page</h1>
    
    <!-- Test 1: Plain header HTML -->
    <h2>Test 1: Static Header (No Fetch)</h2>
    <div id="static-header">
        <!-- Copy of header.html content -->
        <header class="site-header">
            <nav class="nav-container" role="navigation">
                <a href="/" class="nav-logo">Utlyze</a>
                
                <button class="nav-toggle" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="nav-toggle-line"></span>
                    <span class="nav-toggle-line"></span>
                    <span class="nav-toggle-line"></span>
                </button>
                
                <ul class="nav-links">
                    <li><a href="/" class="nav-link">Home</a></li>
                    <li><a href="/agents/" class="nav-link">AI Agents</a></li>
                    <li><a href="/roi/" class="nav-link">Pricing &amp; ROI</a></li>
                    <li><a href="/use-cases/" class="nav-link">Use Cases</a></li>
                    <li><a href="/studio/" class="nav-link">Venture Studio</a></li>
                    <li><a href="/portfolio/" class="nav-link">Portfolio</a></li>
                    <li><a href="/about/" class="nav-link">About</a></li>
                    <li><a href="/resources/" class="nav-link">Resources</a></li>
                    <li><a href="/contact/" class="nav-link cta-nav">Contact</a></li>
                </ul>
            </nav>
        </header>
    </div>
    
    <hr style="margin: 40px 0;">
    
    <!-- Test 2: Dynamically loaded header -->
    <h2>Test 2: Dynamically Loaded Header</h2>
    <div id="dynamic-header"></div>
    
    <!-- Debug info panel -->
    <div class="debug-info">
        <h3>Debug Info</h3>
        <div>
            <strong>Nav Links Classes:</strong> <span id="nav-classes">-</span><br>
            <strong>Toggle Classes:</strong> <span id="toggle-classes">-</span><br>
            <strong>Aria Expanded:</strong> <span id="aria-expanded">-</span><br>
            <strong>Scripts Loaded:</strong> <span id="scripts-loaded">-</span>
        </div>
        <h4>Event Log:</h4>
        <div class="debug-log" id="debug-log"></div>
    </div>
    
    <script>
        const log = (msg) => {
            const logEl = document.getElementById('debug-log');
            const time = new Date().toLocaleTimeString();
            logEl.innerHTML += `[${time}] ${msg}<br>`;
            logEl.scrollTop = logEl.scrollHeight;
            console.log(msg);
        };
        
        const updateDebugInfo = () => {
            const navLinks = document.querySelector('.nav-links');
            const toggle = document.querySelector('.nav-toggle');
            
            document.getElementById('nav-classes').textContent = navLinks ? navLinks.className : 'Not found';
            document.getElementById('toggle-classes').textContent = toggle ? toggle.className : 'Not found';
            document.getElementById('aria-expanded').textContent = toggle ? toggle.getAttribute('aria-expanded') : 'Not found';
        };
        
        // Test static header
        log('Testing static header...');
        const staticToggle = document.querySelector('#static-header .nav-toggle');
        const staticNav = document.querySelector('#static-header .nav-links');
        
        if (staticToggle && staticNav) {
            log('Static elements found');
            staticToggle.addEventListener('click', function(e) {
                log('Static toggle clicked');
                const expanded = this.getAttribute('aria-expanded') === 'true';
                this.setAttribute('aria-expanded', !expanded);
                staticNav.classList.toggle('nav-links--open');
                this.classList.toggle('nav-toggle--active');
                log(`Classes after toggle: nav-links: "${staticNav.className}", toggle: "${this.className}"`);
                updateDebugInfo();
            });
        } else {
            log('ERROR: Static elements not found');
        }
        
        // Test dynamic header
        log('Loading dynamic header...');
        fetch('/partials/header.html')
            .then(resp => {
                log(`Fetch response: ${resp.status}`);
                return resp.text();
            })
            .then(html => {
                log('Header HTML loaded');
                document.getElementById('dynamic-header').innerHTML = html;
                
                // Initialize dynamic header
                const dynToggle = document.querySelector('#dynamic-header .nav-toggle');
                const dynNav = document.querySelector('#dynamic-header .nav-links');
                
                if (dynToggle && dynNav) {
                    log('Dynamic elements found');
                    dynToggle.addEventListener('click', function(e) {
                        log('Dynamic toggle clicked');
                        const expanded = this.getAttribute('aria-expanded') === 'true';
                        this.setAttribute('aria-expanded', !expanded);
                        dynNav.classList.toggle('nav-links--open');
                        this.classList.toggle('nav-toggle--active');
                        log(`Classes after toggle: nav-links: "${dynNav.className}", toggle: "${this.className}"`);
                    });
                } else {
                    log('ERROR: Dynamic elements not found');
                }
            })
            .catch(err => log(`ERROR loading header: ${err}`));
        
        // Check if app.js is loaded
        document.getElementById('scripts-loaded').textContent = 
            `app.js: ${typeof initializeMobileMenu !== 'undefined' ? 'Yes' : 'No'}`;
        
        // Monitor for any JavaScript errors
        window.addEventListener('error', (e) => {
            log(`JS ERROR: ${e.message} at ${e.filename}:${e.lineno}`);
        });
        
        // Initial debug info
        setTimeout(updateDebugInfo, 100);
    </script>
</body>
</html>